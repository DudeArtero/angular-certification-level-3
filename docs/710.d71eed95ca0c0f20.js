"use strict";(self.webpackChunkangular_certification_level_2=self.webpackChunkangular_certification_level_2||[]).push([[710],{5710:(F,d,a)=>{a.r(d),a.d(d,{LocationDetailModule:()=>S});var g,m,u,s=a(6895),p=a(2761),C=a(4466),h=a(655),x=a(590),M=a(615),t=a(8256),_=a(1834),D=a(8444),v=a(2925);const L=function(o){return{separator:o}};function P(o,e){if(1&o&&(t.TgZ(0,"div",5)(1,"div",6)(2,"strong")(3,"i"),t._uU(4),t.ALo(5,"date"),t.qZA()(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.TgZ(8,"span")(9,"i"),t._uU(10,"Temperatures today:"),t.qZA()(),t.TgZ(11,"div",7)(12,"span"),t._uU(13),t.qZA()()(),t.TgZ(14,"div",8),t._UZ(15,"img",9),t.qZA()()),2&o){const n=e.$implicit;t.Q6J("ngClass",t.VKq(10,L,!e.last)),t.xp6(4),t.Oqu(t.xi3(5,7,n.date,"fullDate")),t.xp6(3),t.hij("Current conditions: ",n.data.main,""),t.xp6(6),t.lnq("Current ",n.data.currentTemp," - Max ",n.data.maxTemp," - Min ",n.data.minTemp,""),t.xp6(2),t.MGl("src","assets/weather-icons/",null==n.data?null:n.data.icon,".png",t.LSH)}}function y(o,e){if(1&o&&(t.ynx(0),t.TgZ(1,"h3"),t._uU(2),t.qZA(),t.YNc(3,P,16,12,"div",4),t.BQk()),2&o){const n=t.oxw();t.xp6(2),t.lnq("Forecast of the next days in ",n.location.name," (",n.location.zipcode,", ",n.location.countryCode,")"),t.xp6(1),t.Q6J("ngForOf",n.locationDataList)}}function Z(o,e){1&o&&t._UZ(0,"spinner")}const T=function(){return["/weather-location-search"]};class r{constructor(e,n,i){this.route=e,this.weatherService=n,this.locationStorageService=i,g.add(this),this.locationDataList=[]}ngOnInit(){const e=this.route.snapshot.params.name,n=Number.parseInt(this.route.snapshot.params.zipcode);this.location=this.locationStorageService.getLocation(n,e),(0,h.Q_)(this,g,"m",m).call(this).find(c=>c.zipcode===n&&c.name===e),this.weatherService.searchFiveDayForecast(this.location.zipcode,this.location.countryCode).pipe((0,x.P)()).subscribe(c=>{c.list.map(l=>{let A=new Date(l.dt_txt);l.dt_txt_group_key=(0,h.Q_)(this,g,"m",u).call(this,A)});let f=class O{constructor(){}static groupBy(e,n){return e.reduce((i,c)=>(i[c[n]]=i[c[n]]||[],i[c[n]].push(c),i),[])}}.groupBy(c.list,"dt_txt_group_key");for(const l in f)this.locationDataList.push({date:new Date(l),data:M.L.mapLocationData(f[l][0])})})}}g=new WeakSet,m=function(){return JSON.parse(localStorage.getItem("locations")??"[]")??[]},u=function(e){return`${e.getMonth()}-${e.getDate()}-${e.getFullYear()}`},r.\u0275fac=function(e){return new(e||r)(t.Y36(p.gz),t.Y36(_.F),t.Y36(D.j))},r.\u0275cmp=t.Xpm({type:r,selectors:[["location-detail"]],decls:6,vars:4,consts:[[1,"weather-location-details"],[4,"ngIf","ngIfElse"],["spinner",""],[3,"routerLink"],["class","forecast-container",3,"ngClass",4,"ngFor","ngForOf"],[1,"forecast-container",3,"ngClass"],[1,"forecast-data"],[1,"forecast-data-temperatures"],[1,"weather-icon"],["alt","",3,"src"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,y,4,4,"ng-container",1),t.YNc(2,Z,1,0,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"button",3),t._uU(5," < Back to the list of locations"),t.qZA()),2&e){const i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.location&&n.locationDataList.length>0)("ngIfElse",i),t.xp6(3),t.Q6J("routerLink",t.DdM(3,T))}},dependencies:[p.rH,s.mk,s.sg,s.O5,v.O,s.uU],styles:["[_nghost-%COMP%]{display:block;margin:24px auto;width:600px}[_nghost-%COMP%]   .weather-location-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;margin:24px 0;padding:16px 24px;background-color:#f8f8f8;outline:1px solid #92a6ff;border-radius:6px;min-height:135px}[_nghost-%COMP%]   .weather-location-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;padding-bottom:16px}[_nghost-%COMP%]   .weather-location-details[_ngcontent-%COMP%]   .forecast-container[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .weather-location-details[_ngcontent-%COMP%]   .forecast-container.separator[_ngcontent-%COMP%]{border-bottom:1px solid lightgrey}[_nghost-%COMP%]   .weather-location-details[_ngcontent-%COMP%]   .forecast-container[_ngcontent-%COMP%]:not(:last-child){padding-bottom:24px;margin-bottom:24px}[_nghost-%COMP%]   .weather-location-details[_ngcontent-%COMP%]   .forecast-container[_ngcontent-%COMP%]   .forecast-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;width:75%}[_nghost-%COMP%]   .weather-location-details[_ngcontent-%COMP%]   .forecast-container[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{flex-grow:1;display:flex;justify-content:center}"]});const w=[{path:":zipcode/:name",component:r}];let S=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(w),s.ez,C.m]}),o})()}}]);